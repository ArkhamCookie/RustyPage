<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, inital-scale=1">

	<title>
		{% if let Some(title) = title %}
			{{ title }}
		{% else %}
			Homepage
		{% endif %}
	</title>

	{{ theme }}

	<style>
		/** Colors */
		body {
			background: var(--base);
			color: var(--text);
		}

		a {
			color: var(--link);
		}

		#search-input {
			background: var(--surface-zero);
			color: var(--text);
			border-color: var(--base);
		}

		/** Styling */
		#search-input {
			outline: none;
		}

		/** Positioning */
		body {
			height: 100%;
			display: flex;
			flex-direction: column;
		}

		footer {
			position: fixed;
			bottom: 0;
			width: 100%;
			text-align: center;
		}
	</style>
</head>

<body>
	{% if let Some(search_engine) = search_engine %}
		{% if !search_engine.is_empty() %}
			<form id="search-bar">
				<input id="search-input" placeholder="Search..." autocomplete="off">
			</form>
			<script>
				const searchForm = document.querySelector("#search-bar");
				const searchInput = document.querySelector("#search-input");

				searchForm.addEventListener("submit", (event) => {
					event.preventDefault();

					const engine = "{{search_engine}}";
					const url = engine.replace("%q", encodeURIComponent(searchInput.value));

					window.open(url);
				});
			</script>
		{% endif %}
	{% endif %}

	<section id=bookmarks-section>
		{% for bookmark in bookmarks %}
			<div class="bookmark" id="{{bookmark.id}}">
				<a href="{{bookmark.link}}">{{bookmark.name}}</a>
			</div>

			{% if !bookmark.shortcut.is_empty() %}
				<script>
					function handleShortcut(event) {
						if (event.key === "{{bookmark.shortcut}}") {
							event.preventDefault();
							window.open("{{bookmark.link}}")
						}
					}

					document.addEventListener("keydown", handleShortcut);
				</script>
			{% endif %}
		{% endfor %}
	</section>

	{% if footer %}
		<footer>
			<p><small>Made with <a href="https://github.com/ArkhamCookie/RustyPage">RustyPage</a>.</small></p>
		</footer>
	{% endif %}
</body>

</html>
